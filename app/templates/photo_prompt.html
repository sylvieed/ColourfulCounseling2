{% extends "layout.html" %}
{% block content %}
    <audio loop src="{{ url_for('static', filename='violet.mp3') }}" autoplay></audio>
    <h1 class="title">New Journal Entry for Photos</h1>
    <img src="{{ url_for('static', filename='journal.gif') }}">

    <form action="{{ url_for('photo_prompt') }}" method="POST">
        <button type="submit" class="btn btn-primary btn-lg button" name="button" value="generate_prompt">Generate</button>
        <input type="hidden" name="prompt" value="{{ photoprompt }}">
    </form>
    <div id="output">
        {% if photoprompt %}
            <h4>{{ photoprompt }}</h4>
        {% endif %}
    </div>
    <div class="col buttons">
        <button class="slide-button button" onclick="window.location.href = '{{ url_for('photo') }}'">Upload</button>
    </div>
    <script>
        function printOutput() {
            var url = "{{ url_for('photo_prompt') }}?_=" + new Date().getTime();
            fetch(url)
                .then(response => response.text())
                .then(prompt => {
                document.getElementById("output").innerHTML = "<h4>" + photoprompt + "</h4>";
                });
        }
    </script>
{% endblock %}
